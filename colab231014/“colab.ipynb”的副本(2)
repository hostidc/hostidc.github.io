{"cells":[{"cell_type":"markdown","metadata":{"id":"EXQ1RFYfI9ms"},"source":["# DragGAN Colab Demo\n","\n","Wild implementation of [Drag Your GAN: Interactive Point-based Manipulation on the Generative Image Manifold](https://vcai.mpi-inf.mpg.de/projects/DragGAN/)"]},{"cell_type":"code","execution_count":1,"metadata":{"id":"3CIZFLv-I9mw","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1685341033864,"user_tz":-480,"elapsed":114010,"user":{"displayName":"yong xu","userId":"01323420738924429383"}},"outputId":"e4b93abc-eb24-43c6-b480-d083e98b8437"},"outputs":[{"output_type":"stream","name":"stdout","text":["Cloning into 'DragGAN'...\n","remote: Enumerating objects: 437, done.\u001b[K\n","remote: Counting objects: 100% (96/96), done.\u001b[K\n","remote: Compressing objects: 100% (10/10), done.\u001b[K\n","remote: Total 437 (delta 86), reused 86 (delta 86), pack-reused 341\u001b[K\n","Receiving objects: 100% (437/437), 7.91 MiB | 7.39 MiB/s, done.\n","Resolving deltas: 100% (253/253), done.\n","Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting gradio==3.28.1 (from -r DragGAN/requirements.txt (line 1))\n","  Downloading gradio-3.28.1-py3-none-any.whl (17.3 MB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m17.3/17.3 MB\u001b[0m \u001b[31m82.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: tqdm in /usr/local/lib/python3.10/dist-packages (from -r DragGAN/requirements.txt (line 2)) (4.65.0)\n","Requirement already satisfied: torch in /usr/local/lib/python3.10/dist-packages (from -r DragGAN/requirements.txt (line 3)) (2.0.1+cu118)\n","Requirement already satisfied: torchvision in /usr/local/lib/python3.10/dist-packages (from -r DragGAN/requirements.txt (line 4)) (0.15.2+cu118)\n","Requirement already satisfied: numpy in /usr/local/lib/python3.10/dist-packages (from -r DragGAN/requirements.txt (line 5)) (1.22.4)\n","Collecting ninja (from -r DragGAN/requirements.txt (line 6))\n","  Downloading ninja-1.11.1-py2.py3-none-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (145 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m146.0/146.0 kB\u001b[0m \u001b[31m20.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting fire (from -r DragGAN/requirements.txt (line 7))\n","  Downloading fire-0.5.0.tar.gz (88 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m88.3/88.3 kB\u001b[0m \u001b[31m12.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25h  Preparing metadata (setup.py) ... \u001b[?25l\u001b[?25hdone\n","Requirement already satisfied: imageio in /usr/local/lib/python3.10/dist-packages (from -r DragGAN/requirements.txt (line 8)) (2.25.1)\n","Requirement already satisfied: imageio-ffmpeg in /usr/local/lib/python3.10/dist-packages (from -r DragGAN/requirements.txt (line 9)) (0.4.8)\n","Requirement already satisfied: scikit-image in /usr/local/lib/python3.10/dist-packages (from -r DragGAN/requirements.txt (line 10)) (0.19.3)\n","Requirement already satisfied: IPython in /usr/local/lib/python3.10/dist-packages (from -r DragGAN/requirements.txt (line 11)) (7.34.0)\n","Collecting aiofiles (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading aiofiles-23.1.0-py3-none-any.whl (14 kB)\n","Collecting aiohttp (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading aiohttp-3.8.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.0 MB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m1.0/1.0 MB\u001b[0m \u001b[31m81.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: altair>=4.2.0 in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (4.2.2)\n","Collecting fastapi (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading fastapi-0.95.2-py3-none-any.whl (56 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m57.0/57.0 kB\u001b[0m \u001b[31m8.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting ffmpy (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading ffmpy-0.3.0.tar.gz (4.8 kB)\n","  Preparing metadata (setup.py) ... \u001b[?25l\u001b[?25hdone\n","Collecting gradio-client>=0.1.3 (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading gradio_client-0.2.5-py3-none-any.whl (288 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m288.1/288.1 kB\u001b[0m \u001b[31m37.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting httpx (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading httpx-0.24.1-py3-none-any.whl (75 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m75.4/75.4 kB\u001b[0m \u001b[31m11.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting huggingface-hub>=0.13.0 (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading huggingface_hub-0.14.1-py3-none-any.whl (224 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m224.5/224.5 kB\u001b[0m \u001b[31m29.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: jinja2 in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (3.1.2)\n","Requirement already satisfied: markdown-it-py[linkify]>=2.0.0 in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (2.2.0)\n","Requirement already satisfied: markupsafe in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (2.1.2)\n","Requirement already satisfied: matplotlib in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (3.7.1)\n","Collecting mdit-py-plugins<=0.3.3 (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading mdit_py_plugins-0.3.3-py3-none-any.whl (50 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m50.5/50.5 kB\u001b[0m \u001b[31m7.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting orjson (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading orjson-3.8.14-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (136 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m136.6/136.6 kB\u001b[0m \u001b[31m19.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: pandas in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (1.5.3)\n","Requirement already satisfied: pillow in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (8.4.0)\n","Requirement already satisfied: pydantic in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (1.10.7)\n","Collecting pydub (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading pydub-0.25.1-py2.py3-none-any.whl (32 kB)\n","Collecting python-multipart (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading python_multipart-0.0.6-py3-none-any.whl (45 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m45.7/45.7 kB\u001b[0m \u001b[31m7.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: pyyaml in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (6.0)\n","Requirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (2.27.1)\n","Collecting semantic-version (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading semantic_version-2.10.0-py2.py3-none-any.whl (15 kB)\n","Requirement already satisfied: typing-extensions in /usr/local/lib/python3.10/dist-packages (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (4.5.0)\n","Collecting uvicorn (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading uvicorn-0.22.0-py3-none-any.whl (58 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m58.3/58.3 kB\u001b[0m \u001b[31m9.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting websockets>=10.0 (from gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading websockets-11.0.3-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (129 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m129.9/129.9 kB\u001b[0m \u001b[31m17.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: filelock in /usr/local/lib/python3.10/dist-packages (from torch->-r DragGAN/requirements.txt (line 3)) (3.12.0)\n","Requirement already satisfied: sympy in /usr/local/lib/python3.10/dist-packages (from torch->-r DragGAN/requirements.txt (line 3)) (1.11.1)\n","Requirement already satisfied: networkx in /usr/local/lib/python3.10/dist-packages (from torch->-r DragGAN/requirements.txt (line 3)) (3.1)\n","Requirement already satisfied: triton==2.0.0 in /usr/local/lib/python3.10/dist-packages (from torch->-r DragGAN/requirements.txt (line 3)) (2.0.0)\n","Requirement already satisfied: cmake in /usr/local/lib/python3.10/dist-packages (from triton==2.0.0->torch->-r DragGAN/requirements.txt (line 3)) (3.25.2)\n","Requirement already satisfied: lit in /usr/local/lib/python3.10/dist-packages (from triton==2.0.0->torch->-r DragGAN/requirements.txt (line 3)) (16.0.5)\n","Requirement already satisfied: six in /usr/local/lib/python3.10/dist-packages (from fire->-r DragGAN/requirements.txt (line 7)) (1.16.0)\n","Requirement already satisfied: termcolor in /usr/local/lib/python3.10/dist-packages (from fire->-r DragGAN/requirements.txt (line 7)) (2.3.0)\n","Requirement already satisfied: scipy>=1.4.1 in /usr/local/lib/python3.10/dist-packages (from scikit-image->-r DragGAN/requirements.txt (line 10)) (1.10.1)\n","Requirement already satisfied: tifffile>=2019.7.26 in /usr/local/lib/python3.10/dist-packages (from scikit-image->-r DragGAN/requirements.txt (line 10)) (2023.4.12)\n","Requirement already satisfied: PyWavelets>=1.1.1 in /usr/local/lib/python3.10/dist-packages (from scikit-image->-r DragGAN/requirements.txt (line 10)) (1.4.1)\n","Requirement already satisfied: packaging>=20.0 in /usr/local/lib/python3.10/dist-packages (from scikit-image->-r DragGAN/requirements.txt (line 10)) (23.1)\n","Requirement already satisfied: setuptools>=18.5 in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (67.7.2)\n","Collecting jedi>=0.16 (from IPython->-r DragGAN/requirements.txt (line 11))\n","  Downloading jedi-0.18.2-py2.py3-none-any.whl (1.6 MB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m1.6/1.6 MB\u001b[0m \u001b[31m84.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: decorator in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (4.4.2)\n","Requirement already satisfied: pickleshare in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (0.7.5)\n","Requirement already satisfied: traitlets>=4.2 in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (5.7.1)\n","Requirement already satisfied: prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0 in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (3.0.38)\n","Requirement already satisfied: pygments in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (2.14.0)\n","Requirement already satisfied: backcall in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (0.2.0)\n","Requirement already satisfied: matplotlib-inline in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (0.1.6)\n","Requirement already satisfied: pexpect>4.3 in /usr/local/lib/python3.10/dist-packages (from IPython->-r DragGAN/requirements.txt (line 11)) (4.8.0)\n","Requirement already satisfied: entrypoints in /usr/local/lib/python3.10/dist-packages (from altair>=4.2.0->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (0.4)\n","Requirement already satisfied: jsonschema>=3.0 in /usr/local/lib/python3.10/dist-packages (from altair>=4.2.0->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (4.3.3)\n","Requirement already satisfied: toolz in /usr/local/lib/python3.10/dist-packages (from altair>=4.2.0->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (0.12.0)\n","Requirement already satisfied: fsspec in /usr/local/lib/python3.10/dist-packages (from gradio-client>=0.1.3->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (2023.4.0)\n","Requirement already satisfied: parso<0.9.0,>=0.8.0 in /usr/local/lib/python3.10/dist-packages (from jedi>=0.16->IPython->-r DragGAN/requirements.txt (line 11)) (0.8.3)\n","Requirement already satisfied: mdurl~=0.1 in /usr/local/lib/python3.10/dist-packages (from markdown-it-py[linkify]>=2.0.0->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (0.1.2)\n","Collecting linkify-it-py<3,>=1 (from markdown-it-py[linkify]>=2.0.0->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading linkify_it_py-2.0.2-py3-none-any.whl (19 kB)\n","Requirement already satisfied: python-dateutil>=2.8.1 in /usr/local/lib/python3.10/dist-packages (from pandas->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (2.8.2)\n","Requirement already satisfied: pytz>=2020.1 in /usr/local/lib/python3.10/dist-packages (from pandas->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (2022.7.1)\n","Requirement already satisfied: ptyprocess>=0.5 in /usr/local/lib/python3.10/dist-packages (from pexpect>4.3->IPython->-r DragGAN/requirements.txt (line 11)) (0.7.0)\n","Requirement already satisfied: wcwidth in /usr/local/lib/python3.10/dist-packages (from prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0->IPython->-r DragGAN/requirements.txt (line 11)) (0.2.6)\n","Requirement already satisfied: attrs>=17.3.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (23.1.0)\n","Requirement already satisfied: charset-normalizer<4.0,>=2.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (2.0.12)\n","Collecting multidict<7.0,>=4.5 (from aiohttp->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading multidict-6.0.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (114 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m114.5/114.5 kB\u001b[0m \u001b[31m14.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting async-timeout<5.0,>=4.0.0a3 (from aiohttp->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading async_timeout-4.0.2-py3-none-any.whl (5.8 kB)\n","Collecting yarl<2.0,>=1.0 (from aiohttp->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading yarl-1.9.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (268 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m268.8/268.8 kB\u001b[0m \u001b[31m12.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting frozenlist>=1.1.1 (from aiohttp->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading frozenlist-1.3.3-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (149 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m149.6/149.6 kB\u001b[0m \u001b[31m22.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting aiosignal>=1.1.2 (from aiohttp->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading aiosignal-1.3.1-py3-none-any.whl (7.6 kB)\n","Collecting starlette<0.28.0,>=0.27.0 (from fastapi->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading starlette-0.27.0-py3-none-any.whl (66 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m67.0/67.0 kB\u001b[0m \u001b[31m9.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: certifi in /usr/local/lib/python3.10/dist-packages (from httpx->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (2022.12.7)\n","Collecting httpcore<0.18.0,>=0.15.0 (from httpx->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading httpcore-0.17.2-py3-none-any.whl (72 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m72.5/72.5 kB\u001b[0m \u001b[31m11.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: idna in /usr/local/lib/python3.10/dist-packages (from httpx->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (3.4)\n","Requirement already satisfied: sniffio in /usr/local/lib/python3.10/dist-packages (from httpx->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (1.3.0)\n","Requirement already satisfied: contourpy>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (1.0.7)\n","Requirement already satisfied: cycler>=0.10 in /usr/local/lib/python3.10/dist-packages (from matplotlib->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (0.11.0)\n","Requirement already satisfied: fonttools>=4.22.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (4.39.3)\n","Requirement already satisfied: kiwisolver>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (1.4.4)\n","Requirement already satisfied: pyparsing>=2.3.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (3.0.9)\n","Requirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (1.26.15)\n","Requirement already satisfied: mpmath>=0.19 in /usr/local/lib/python3.10/dist-packages (from sympy->torch->-r DragGAN/requirements.txt (line 3)) (1.3.0)\n","Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (8.1.3)\n","Collecting h11>=0.8 (from uvicorn->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading h11-0.14.0-py3-none-any.whl (58 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m58.3/58.3 kB\u001b[0m \u001b[31m9.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: anyio<5.0,>=3.0 in /usr/local/lib/python3.10/dist-packages (from httpcore<0.18.0,>=0.15.0->httpx->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (3.6.2)\n","Requirement already satisfied: pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,>=0.14.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema>=3.0->altair>=4.2.0->gradio==3.28.1->-r DragGAN/requirements.txt (line 1)) (0.19.3)\n","Collecting uc-micro-py (from linkify-it-py<3,>=1->markdown-it-py[linkify]>=2.0.0->gradio==3.28.1->-r DragGAN/requirements.txt (line 1))\n","  Downloading uc_micro_py-1.0.2-py3-none-any.whl (6.2 kB)\n","Building wheels for collected packages: fire, ffmpy\n","  Building wheel for fire (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for fire: filename=fire-0.5.0-py2.py3-none-any.whl size=116932 sha256=6240471fc5fb89d8831b4a0064f73e8c714120601e42a1d7a6016a9efaab3d55\n","  Stored in directory: /root/.cache/pip/wheels/90/d4/f7/9404e5db0116bd4d43e5666eaa3e70ab53723e1e3ea40c9a95\n","  Building wheel for ffmpy (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for ffmpy: filename=ffmpy-0.3.0-py3-none-any.whl size=4694 sha256=0c0b3376ea4283046c618a12e703e31848d0ac22e6dd6534c6e755ee404d24a8\n","  Stored in directory: /root/.cache/pip/wheels/0c/c2/0e/3b9c6845c6a4e35beb90910cc70d9ac9ab5d47402bd62af0df\n","Successfully built fire ffmpy\n","Installing collected packages: pydub, ninja, ffmpy, websockets, uc-micro-py, semantic-version, python-multipart, orjson, multidict, jedi, h11, frozenlist, fire, async-timeout, aiofiles, yarl, uvicorn, starlette, mdit-py-plugins, linkify-it-py, huggingface-hub, httpcore, aiosignal, httpx, fastapi, aiohttp, gradio-client, gradio\n","Successfully installed aiofiles-23.1.0 aiohttp-3.8.4 aiosignal-1.3.1 async-timeout-4.0.2 fastapi-0.95.2 ffmpy-0.3.0 fire-0.5.0 frozenlist-1.3.3 gradio-3.28.1 gradio-client-0.2.5 h11-0.14.0 httpcore-0.17.2 httpx-0.24.1 huggingface-hub-0.14.1 jedi-0.18.2 linkify-it-py-2.0.2 mdit-py-plugins-0.3.3 multidict-6.0.4 ninja-1.11.1 orjson-3.8.14 pydub-0.25.1 python-multipart-0.0.6 semantic-version-2.10.0 starlette-0.27.0 uc-micro-py-1.0.2 uvicorn-0.22.0 websockets-11.0.3 yarl-1.9.2\n"]}],"source":["#@title Installation\n","!git clone https://github.com/Zeqiang-Lai/DragGAN.git\n","\n","import sys\n","sys.path.append(\".\")\n","sys.path.append('./DragGAN')\n","\n","!pip install -r DragGAN/requirements.txt\n","\n","from gradio_app import main"]},{"cell_type":"markdown","metadata":{"id":"h4zWBtAFI9mx"},"source":["**If you have problem in the following demo, such as the incorrected image, or facing errors. Please try to run the following block again.**\n","\n","If the errors still exist, you could fire an issue on [Github](https://github.com/Zeqiang-Lai/DragGAN)."]},{"cell_type":"code","execution_count":2,"metadata":{"id":"ig15pe_rI9my","colab":{"base_uri":"https://localhost:8080/","height":721},"executionInfo":{"status":"ok","timestamp":1685341060008,"user_tz":-480,"elapsed":26152,"user":{"displayName":"yong xu","userId":"01323420738924429383"}},"outputId":"a180d84c-39f5-4571-8d63-f91ab424bc48"},"outputs":[{"output_type":"stream","name":"stdout","text":["stylegan2-ffhq-config-f.pt not found\n","Try to download from huggingface:  https://huggingface.co/aaronb/StyleGAN2/resolve/main/stylegan2-ffhq-config-f.pt\n"]},{"output_type":"stream","name":"stderr","text":["stylegan2-ffhq-config-f.pt: 133MB [00:00, 177MB/s]                           \n"]},{"output_type":"stream","name":"stdout","text":["Downloaded to  checkpoints/stylegan2-ffhq-config-f.pt\n","Setting queue=True in a Colab notebook requires sharing enabled. Setting `share=True` (you can turn this off by setting `share=False` in `launch()` explicitly).\n","\n","Colab notebook detected. To show errors in colab notebook, set debug=True in launch()\n","Running on public URL: https://95e93f68e687426ee9.gradio.live\n","\n","This share link expires in 72 hours. For free permanent hosting and GPU upgrades (NEW!), check out Spaces: https://huggingface.co/spaces\n"]},{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.HTML object>"],"text/html":["<div><iframe src=\"https://95e93f68e687426ee9.gradio.live\" width=\"100%\" height=\"500\" allow=\"autoplay; camera; microphone; clipboard-read; clipboard-write;\" frameborder=\"0\" allowfullscreen></iframe></div>"]},"metadata":{}},{"output_type":"execute_result","data":{"text/plain":[]},"metadata":{},"execution_count":2}],"source":["demo = main()\n","demo.queue(concurrency_count=1, max_size=20).launch()"]}],"metadata":{"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.7.12"},"orig_nbformat":4,"colab":{"provenance":[{"file_id":"https://github.com/Zeqiang-Lai/DragGAN/blob/master/colab.ipynb","timestamp":1685340809793}],"gpuType":"T4"},"accelerator":"GPU"},"nbformat":4,"nbformat_minor":0}